<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../assets/img/favicon.ico" type="image/x-icon">
  <title>EcoMarket/Conta</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f5f5f5;
      color: #333;
    }

    header {
      background: linear-gradient(to right, #597729, #83c716);
      color: white;
      padding: 20px;
      text-align: center;
      position: relative;
    }

    header img {
      max-width: 10%;
      height: auto;
      margin-left: -90%;
      margin-top: -4%;
    }

    header ul {
      position: absolute;
      top: 20px;
      right: 20px;
      list-style-type: none;
      font-weight: bolder;
    }

    header ul li {
      color: white;
    }

    header a {
      color: white;
      font-size: 30px;
      padding: 5px;
    }

    header a:hover {
      background-color: black;
      transition: 0.5s;
      padding: 8px;
      border-radius: 20px;
    }

    .profile-pic {
      color: white;
      width: 150px;
      height: 150px;
      background: #eee;
      border-radius: 50%;
      margin: 10px auto 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 75px;
      border: 3px solid white;
    }

    .content {
      display: flex;
      flex-flow: column nowrap;
      background: white;
      padding: 20px;
      margin: 10px;
      border: black 2px solid ;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      text-align: left;
    }

    input {
      border-radius: 5px;
      padding: 4px;
    }

    input[type=text] {
      padding: 8px;
      font-size: 15px;
      width: 50%;
      height: 10px;
    }

    input[type=tel] {
      font-size: .9em;
    }

    input[type=email] {
      width: 52%;
    }

    input[type=password] {
      width: 51%;
    }

    label {
      font-size: 1.1em;
      font-weight: bold;
    }

    #botoes-container {
      display: flex;
      flex-flow: row wrap;
      align-items: center;
    }

    #enviar {
      background-color: #83c716e0;
      border-radius: 10px;
      padding: 10px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
    }

    #enviar:hover {
      background-color: #689e12;
    }

    #btn-logout {
      background-color: rgb(216, 45, 45);
      border-radius: 10px;
      padding: 10px;
      border: none;
      cursor: pointer;
      font-weight: bold;
      margin-left: 4px;
      transition: background-color 0.3s;
    }

    #btn-logout:hover {
      background-color: rgb(180, 37, 37);
    }

    #btn-excluir-conta {
      background-color: rgb(216, 45, 45);
      margin-left: auto;
      color: black;
      border: none;
      padding: 10px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      transition: background-color 0.3s;
    }

    #btn-excluir-conta:hover {
      background-color: rgb(180, 37, 37);
    }

    .item {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid #eee;
    }

    .item:last-child {
      border-bottom: none;
    }

    .item span {
      color: #666;
    }

    .verify {
      color: green;
      font-weight: bold;
    }

    .verify-link {
      color: #f4511e;
      cursor: pointer;
    }

    /* Estilos do Quiz */
    .educacao-ambiental {
      background: white;
      padding: 20px;
      margin: 10px;
      border: 2px solid black;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .quiz {
      margin-top: 20px;
    }

    #pergunta-quiz {
      font-size: 1.2rem;
      margin-bottom: 15px;
      font-weight: bold;
    }

    #opcoes-quiz {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-bottom: 20px;
    }

    #opcoes-quiz button {
      padding: 12px;
      border: 2px solid #ddd;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      transition: all 0.3s;
      text-align: left;
    }

    #opcoes-quiz button:hover {
      border-color: #83c716;
      background-color: rgba(131, 199, 22, 0.1);
    }

    #opcoes-quiz button.correta {
      border-color: #4CAF50;
      background-color: rgba(76, 175, 80, 0.1);
    }

    #opcoes-quiz button.incorreta {
      border-color: #f44336;
      background-color: rgba(244, 67, 54, 0.1);
    }

    #pontuacao {
      font-weight: bold;
      color: #597729;
    }

    .feedback {
      padding: 10px;
      margin: 10px 0;
      border-radius: 5px;
      display: none;
    }

    .feedback.correta {
      background-color: rgba(76, 175, 80, 0.1);
      border-left: 4px solid #4CAF50;
      display: block;
    }

    .feedback.incorreta {
      background-color: rgba(244, 67, 54, 0.1);
      border-left: 4px solid #f44336;
      display: block;
    }

    .conquistas {
      margin-top: 30px;
    }

    #badges {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .badge {
      width: 60px;
      height: 60px;
      background: #f0f0f0;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
    }

    /* Responsividade */
    @media (min-width: 600px) {
      #opcoes-quiz {
        grid-template-columns: 1fr 1fr;
      }

      .content,
      .educacao-ambiental {
        max-width: 600px;
        margin: 10px auto;
      }
    }
  </style>
</head>

<body>

  <header>
    <h1>Perfil</h1>
    <h2 id="saudacao"></h2>
    <img src="../assets/img/verde-300.png" alt="Logo EcoMarket">
    <ul>
      <li><a href="../paginas/home.html"><ion-icon name="home-outline"></ion-icon></a></li>
    </ul>
  </header>

  <div class="profile-pic"><ion-icon name="person-outline"></ion-icon></div>

  <form class="content" id="form-perfil" action="../api/cadastro.js" method="post">
    <p>
      <label for="inome">Nome</label>
      <input type="text" name="nome" id="inome" required minlength="5" maxlength="40" autocomplete="name">
    </p>
    <p>
      <input type="radio" name="sexo" id="imas" value="masculino"> <label for="imas">Masculino</label>
      <input type="radio" name="sexo" id="ifem" value="feminino"> <label for="ifem">Feminino</label>
    </p>
    <p>
      <label for="idat">Data de Nascimento</label>
      <input type="date" name="dat" id="idat">
    </p>
    <p>
      <label for="itel">Telefone</label>
      <input type="tel" name="tel" id="itel" required autocomplete="tel" pattern="^\(\d{2})\d{4,5}-\d{4}$"
        placeholder="(XX)XXXXX-XXXX">
    </p>
    <p>
      <label for="iemail">Email</label>
      <input type="email" name="email" id="iemail" autocomplete="email" required placeholder="seuemail@gmail.com">
    </p>
    <p>
      <label for="isenha">Senha</label>
      <input type="password" name="senha" id="isenha" required minlength="6">
    </p>
    <p>
      <label for="insenha">Nova Senha (opcional)</label>
      <input type="password" name="nsenha" id="insenha" placeholder="Nova senha">
    </p>
    <div id="botoes-container">
        <input id="enviar" type="submit" value="Atualizar Perfil">
        <button type="button" id="btn-logout">Sair</button>
        <button type="button" id="btn-excluir-conta">Excluir Conta</button>
    </div>
  </form>

  <div class="educacao-ambiental">
    <h2>üéì Seu Progresso de Aprendizado</h2>

    <div class="quiz">
      <h3>Teste seus conhecimentos ambientais</h3>
      <div id="pergunta-quiz"></div>
      <div id="opcoes-quiz"></div>
      <div id="feedback" class="feedback"></div>
      <p>Pontua√ß√£o: <span id="pontuacao">0</span></p>
    </div>

    <div class="conquistas">
      <h3>üèÜ Conquistas</h3>
      <div id="badges"></div>
    </div>
  </div>

  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

  <script>
    const quiz = [
      {
        pergunta: "Qual destes materiais demora mais para se decompor na natureza?",
        opcoes: ["Papel (2-6 semanas)", "Casca de banana (2 anos)", "Vidro (1 milh√£o de anos)", "Folhas secas (6 meses)"],
        resposta: 2,
        explicacao: "O vidro pode levar at√© 1 milh√£o de anos para se decompor completamente na natureza!"
      },
      {
        pergunta: "Qual destas a√ß√µes economiza mais √°gua?",
        opcoes: ["Tomar banhos curtos", "Fechar a torneira ao escovar os dentes", "Consertar vazamentos", "Reutilizar √°gua da chuva"],
        resposta: 2,
        explicacao: "Um simples vazamento pode desperdi√ßar at√© 20.000 litros de √°gua por ano!"
      },
      {
        pergunta: "O que significa a sigla '3R' em sustentabilidade?",
        opcoes: ["Reciclagem de Papel e Alum√≠nio", "Res√≠duos Perigosos Ambientais", "Redu√ß√£o, Reuso e Reciclagem", "Responsabilidade P√∫blica Ambiental"],
        resposta: 2,
        explicacao: "Os 3 Rs da sustentabilidade s√£o: Reduzir, Reutilizar e Reciclar, nessa ordem de import√¢ncia."
      },
      {
        pergunta: "Qual destas energias √© considerada renov√°vel?",
        opcoes: ["Energia nuclear", "Energia de carv√£o", "Energia e√≥lica", "Energia de g√°s natural"],
        resposta: 2,
        explicacao: "A energia e√≥lica √© renov√°vel pois utiliza o vento, um recurso natural inesgot√°vel."
      },
      {
        pergunta: "Qual o maior benef√≠cio da compostagem?",
        opcoes: ["Reduz o lixo org√¢nico em aterros", "Produz adubo natural", "Diminui emiss√£o de metano", "Todos os anteriores"],
        resposta: 3,
        explicacao: "A compostagem traz todos esses benef√≠cios, ajudando a fechar o ciclo dos nutrientes."
      }
    ];

    let perguntaAtual = 0;
    let pontuacao = 0;
    let respostasCorretas = 0;

    function carregarPergunta() {
      const q = quiz[perguntaAtual];
      document.getElementById('pergunta-quiz').textContent = q.pergunta;

      const opcoesDiv = document.getElementById('opcoes-quiz');
      opcoesDiv.innerHTML = q.opcoes.map((opcao, index) =>
        `<button onclick="responder(${index})">${opcao}</button>`
      ).join('');

      document.getElementById('feedback').className = 'feedback';
    }

    function responder(opcaoSelecionada) {
      const q = quiz[perguntaAtual];
      const botoes = document.querySelectorAll('#opcoes-quiz button');
      const feedback = document.getElementById('feedback');

      // Desabilita todos os bot√µes
      botoes.forEach(btn => {
        btn.style.pointerEvents = 'none';
      });

      // Marca a resposta correta
      botoes[q.resposta].classList.add('correta');

      // Verifica se acertou
      if (opcaoSelecionada === q.resposta) {
        pontuacao += 10;
        respostasCorretas++;
        feedback.textContent = "‚úÖ Correto! " + q.explicacao;
        feedback.className = 'feedback correta';
      } else {
        // Marca a resposta errada
        botoes[opcaoSelecionada].classList.add('incorreta');
        feedback.textContent = "‚ùå Incorreto. " + q.explicacao;
        feedback.className = 'feedback incorreta';
      }

      document.getElementById('pontuacao').textContent = pontuacao;

      // Atualiza conquistas
      atualizarConquistas();

      // Prepara pr√≥xima pergunta ap√≥s 8 segundos
      setTimeout(() => {
        perguntaAtual = (perguntaAtual + 1) % quiz.length;
        carregarPergunta();
      }, 8000);
    }

    function atualizarConquistas() {
      const badgesDiv = document.getElementById('badges');

      if (respostasCorretas >= 1 && !document.getElementById('badge1')) {
        badgesDiv.innerHTML += `<div class="badge" id="badge1">üå±</div>`;
      }

      if (respostasCorretas >= 3 && !document.getElementById('badge3')) {
        badgesDiv.innerHTML += `<div class="badge" id="badge3">‚ôªÔ∏è</div>`;
      }

      if (respostasCorretas >= 5 && !document.getElementById('badge5')) {
        badgesDiv.innerHTML += `<div class="badge" id="badge5">üèÜ</div>`;
      }
    }

    window.onload = carregarPergunta;
  </script>
  <script>
        // Verifica se o usu√°rio est√° logado
        const usuarioLogado = JSON.parse(localStorage.getItem('usuarioLogado'));

        if (usuarioLogado) {
            // Exemplo: Mostrar nome do usu√°rio em um elemento com ID "saudacao"
            const saudacaoElement = document.getElementById('saudacao');
            if (saudacaoElement) {
                saudacaoElement.textContent = `Ol√°, ${usuarioLogado.nome}!`;
            }
        }
    </script>
    <script src="../assets/js/perfil.js" type="module"></script>
</body>

</html>